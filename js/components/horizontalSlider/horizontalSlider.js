class HorizontalSlider{componentEl=void 0;data=void 0;slideRenderFunction=void 0;slideCreateEventHandlers=void 0;slideUnSelectHandler=void 0;selectedIndex=0;nextSelectedIndex=0;posInitial=0;posFinal=0;posX1=0;posX2=0;offsetLeft=0;viewport=void 0;slidegroup=void 0;slidePadding=0;slideWidth=0;totalWidth=0;slideSize=1;slideSizeNarrow=1;slideSizeWide=1;maxLeft=0;minLeft=0;threshold=100;allowMove=!0;allowWrap=!1;componentWidth=0;componentHeight=0;hasForwardBackControls=!1;constructor(e,t,i,s=100,d=!1,l=0,o=1,n=1,h=null,r=null,a=!1){this.componentEl=e,this.data=t,this.slideRenderFunction=i,this.slideCreateEventHandlers=h,this.slideUnSelectHandler=r,this.threshold=s,this.allowWrap=d,this.selectedIndex=l,this.slideSize=o,this.slideSizeNarrow=o,this.slideSizeWide=n,this.hasForwardBackControls=a,this.init()}init(){if(this.renderSlides(this.componentEl,this.data,this.slideRenderFunction),this.slideCreateEventHandlers&&this.slideCreateEventHandlers(),this.viewport=this.componentEl.querySelector(".slide-viewer"),this.viewport.onmousedown=e=>this.dragStart(e),this.viewport.ontouchstart=e=>this.dragStart(e),1!=this.slideSize){const e=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)/(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);this.slideSize=e>.9?this.slideSizeWide:this.slideSizeNarrow}if(this.slidegroup=this.componentEl.querySelector(".slide-group"),this.slidegroup.style.gridAutoColumns=100*this.slideSize+"%",this.slideWidth=this.slidegroup.offsetWidth*this.slideSize,this.slidePadding=this.slidegroup.offsetWidth*(1-this.slideSize)/2,this.maxLeft=this.slideWidth*(this.data.length-1)-this.slidePadding,this.minLeft=this.slidePadding,this.allowWrap){let e=this.slidegroup.children,t=e[0].cloneNode(!0),i=e[e.length-1].cloneNode(!0);t.style.backgroundColor="orange",i.style.backgroundColor="red",this.slidegroup.insertBefore(i,e[0]),this.slidegroup.appendChild(t),0==this.selectedIndex&&(this.selectedIndex=1),this.selectedIndex>e.length-2&&(this.selectedIndex=e.length-2)}this.slidegroup.style.left=-this.selectedIndex*this.slideWidth+this.slidePadding+"px",this.slidegroup.children[this.selectedIndex].classList.remove("hide-content"),this.componentWidth=this.componentEl.offsetWidth,this.componentHeight=this.componentEl.offsetHeight}handleResize(){let e=!1;this.componentEl.offsetWidth==this.componentWidth&&this.componentEl.offsetHeight==this.componentHeight||(e=!0),e&&(this.componentEl.innerHTML="",this.init())}renderSlides(e,t,i){if(e){e.tabIndex<0&&(e.tabIndex=0);const s="37",d="39";e.onkeydown=e=>{(e=e||window.event).keyCode==s&&this.moveSlides(-1),e.keyCode==d&&this.moveSlides(1)};let l="<div class='left-grab-panel'></div><div class='right-grab-panel'></div>";l+="<div class='slide-viewer'>",this.hasForwardBackControls&&(l+="<div class='control back' role='button'><div class='hide-but-read'>Back</div></div><div class='control forward' role='button'><div class='hide-but-read'>Forward</div></div>"),l+="<div class='slide-group'>",t.map(((e,t)=>(l+=i(e,t),l))),l+="</div>",l+="</div>",e.innerHTML=l,this.hasForwardBackControls&&setTimeout((()=>{const t=e.querySelector(".back");t&&(t.onclick=e=>{this.moveSlides(-1),e.preventDefault()});const i=e.querySelector(".forward");i&&(i.onclick=e=>{this.moveSlides(1),e.preventDefault()})}),300)}else console.error("No component element found.")}dragStart(e){this.allowMove&&(this.posInitial=this.slidegroup.offsetLeft,"touchstart"==e.type?(this.posX1=e.touches[0].clientX,this.viewport.ontouchend=e=>this.dragEnd(e),this.viewport.ontouchleave=e=>this.dragEnd(e),this.viewport.ontouchmove=e=>this.dragUpdate(e)):(this.posX1=e.clientX,this.viewport.onmouseup=e=>this.dragEnd(e),this.viewport.onmouseleave=e=>this.dragEnd(e),this.viewport.onmousemove=e=>this.dragUpdate(e),e.preventDefault()))}dragEnd(e){this.posFinal=this.slidegroup.offsetLeft;const t=this.posFinal-this.posInitial;t<-this.threshold?this.moveSlides(1,"drag"):t>this.threshold?this.moveSlides(-1,"drag"):this.moveSlides(0,"drag"),this.viewport.onmouseup=null,this.viewport.onmousemove=null,this.viewport.onmouseleave=null,this.viewport.ontouchend=null,this.viewport.ontouchleave=null,this.viewport.ontouchmove=null}dragUpdate(e){"touchmove"==e.type?(this.posX2=this.posX1-e.touches[0].clientX,this.posX1=e.touches[0].clientX):(this.posX2=this.posX1-e.clientX,this.posX1=e.clientX);let t=this.slidegroup.offsetLeft-this.posX2;this.allowWrap||(t>this.minLeft&&(t=this.minLeft),t<-this.maxLeft&&(t=-this.maxLeft)),this.slidegroup.style.left=t+"px"}moveSlides(e,t){if(this.allowWrap||!(this.selectedIndex+e>this.data.length-1||this.selectedIndex+e<0))if(this.allowMove){this.slidegroup.classList.add("animating"),0!=e&&(this.slidegroup.children[this.selectedIndex].classList.add("hide-content"),this.slideUnSelectHandler(this.slidegroup.children[this.selectedIndex])),t||(this.posInitial=this.slidegroup.offsetLeft);const i=this.posInitial-e*this.slideWidth;this.slidegroup.style.left=i+"px",this.selectedIndex+=e;let s=this.selectedIndex;this.allowWrap&&(s>this.data.length?s=0:s<1?s=this.data.length-1:s-=1),this.dispatchOnSlide(s),this.allowMove=!1,setTimeout((()=>{this.transitionEnd()}),1e3)}else this.nextSelectedIndex=e}transitionEnd(){this.slidegroup.classList.remove("animating");let e=this.selectedIndex;if(this.allowWrap){const t=1,i=this.data.length;this.selectedIndex<t&&(this.slidegroup.style.left=-i*this.slideWidth+"px",e=i),this.selectedIndex>i&&(this.slidegroup.style.left=-this.slideWidth+"px",e=1),this.selectedIndex=e,e-=1}this.allowMove=!0,this.slidegroup.children[this.selectedIndex].classList.remove("hide-content"),0!==this.nextSelectedIndex&&(this.moveSlides(this.nextSelectedIndex),this.nextSelectedIndex=0)}destroy(){this.componentEl.style.opacity=0}dispatchOnSlide(e){const t=new CustomEvent("onslide",{bubbles:!0,detail:{index:e}});this.slidegroup.children[e].dispatchEvent(t)}dispatchOnSlideComplete(e){const t=new CustomEvent("onslidecomplete",{bubbles:!0,detail:{index:e}});this.slidegroup.children[e].dispatchEvent(t)}getIndex(){return this.selectedIndex}setIndex(e){this.allowWrap&&(e+=1)>this.data.length&&(console.log("resetting index",this.data.length),e=0);let t=e-this.selectedIndex;e!=this.selectedIndex&&this.moveSlides(t)}}